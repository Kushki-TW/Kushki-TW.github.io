<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Kushki Store</title>
    <meta name="keywords" content="store">
    <meta name="description" content="Kushki Store">
    <meta name="author" content="Jontan Murcia">
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/logos/SVG/short.svg">
    <link rel="icon" type="image/png" size="32x32" href="assets/images/logos/PNG/short-oscuro-G.png">
    <meta name="apple-mobile-web-app-title" content="Kushki">
    <meta name="application-name" content="Kushki">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="assets/vendor/line-awesome/line-awesome/line-awesome/css/line-awesome.min.css">
    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/plugins/owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/plugins/magnific-popup/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/plugins/jquery.countdown.css">
    <link rel="stylesheet" href="/path/to/styles/default.min.css">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark-reasonable.min.css">
    <!-- Main CSS File -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/skin/style.css">
    <link rel="stylesheet" href="assets/css/template/style.css">
    <!-- Custom CSS File -->
    <link rel="stylesheet" href="assets/css/custom/style.css">
</head>

<body>
    <div class="page-wrapper">
        <header class="header header-intro-clearance header-4">

        </header><!-- End .header -->

        <main class="main">
            <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
                <div class="container">
                    <h1 class="page-title">Checkout<span>Shop</span></h1>
                </div><!-- End .container -->
            </div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html">Inicio</a></li>
                        <li class="breadcrumb-item"><a href="#">Shop</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Checkout</li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->

            <div class="page-content">
                <div class="checkout">
                    <div class="container">
                        <a href="#code-modal" id="toggle-modal" data-toggle="modal"></a>
                        <div class="row">
                            <div class="col-lg-9">
                                <div class="col-md-12">
                                    <div class="accordion accordion-icon" id="accordion-3">

                                <!-- Kushki.js v1-->
                                        <div class="card">
                                            <div class="card-header" id="heading3-1">
                                                <h2 class="card-title">
                                                    <a class="collapsed" role="button" data-toggle="collapse"
                                                        href="#collapse3-1" aria-expanded="false"
                                                        aria-controls="collapse3-1">
                                                        Tarjeta de Crédito - Kushki.js v1
                                                    </a>
                                                </h2>
                                            </div><!-- End .card-header -->
                                            <div id="collapse3-1" class="collapse" aria-labelledby="heading3-1"
                                                data-parent="#accordion-3">
                                                <div class="card-body">
                                                    <form id="credit-card-form" action="#" onsubmit="">
                                                        <label>Nombre</label>
                                                        <input id="credit-card-name" type="text" class="form-control"
                                                            required>
                                                        <div class="form-group-card">
                                                            <label>Número de tarjeta</label>
                                                            <input id="credit-card-number" type="text"
                                                                class="form-control" required>
                                                            <div id="validateCardNumTxt" class="invalid-feedback"
                                                                style="display: none;">
                                                                Número de tarjeta no válido
                                                            </div>
                                                            <div class="card-type-display">
                                                                <div id="card-visa" class="card-img ">
                                                                    <svg width="24" height="16" viewBox="0 0 24 16"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <g stroke="none" stroke-width="1" fill="none"
                                                                            fill-rule="evenodd">
                                                                            <g id="New-Icons"
                                                                                transform="translate(-80.000000, -280.000000)"
                                                                                fill-rule="nonzero">
                                                                                <g id="Card-Brands"
                                                                                    transform="translate(40.000000, 200.000000)">
                                                                                    <g id="Color"
                                                                                        transform="translate(0.000000, 80.000000)">
                                                                                        <g id="Visa"
                                                                                            transform="translate(40.000000, 0.000000)">
                                                                                            <rect stroke-opacity="0.2"
                                                                                                stroke="#000000"
                                                                                                stroke-width="0.5"
                                                                                                fill="#FFFFFF" x="0.25"
                                                                                                y="0.25" width="23.5"
                                                                                                height="15.5" rx="2">
                                                                                            </rect>
                                                                                            <path
                                                                                                d="M2.78773262,5.91443732 C2.26459089,5.62750595 1.6675389,5.39673777 1,5.23659312 L1.0280005,5.1118821 L3.76497922,5.1118821 C4.13596254,5.12488556 4.43699113,5.23650585 4.53494636,5.63071135 L5.12976697,8.46659052 L5.31198338,9.32072617 L6.97796639,5.1118821 L8.77678896,5.1118821 L6.10288111,11.2775284 L4.30396552,11.2775284 L2.78773262,5.91443732 L2.78773262,5.91443732 Z M10.0999752,11.2840738 L8.39882877,11.2840738 L9.46284763,5.1118821 L11.163901,5.1118821 L10.0999752,11.2840738 Z M16.2667821,5.26277458 L16.0354292,6.59558538 L15.881566,6.53004446 C15.5737466,6.40524617 15.1674138,6.28053516 14.6143808,6.29371316 C13.942741,6.29371316 13.6415263,6.56277129 13.6345494,6.82545859 C13.6345494,7.11441463 13.998928,7.3048411 14.5939153,7.58725177 C15.5740257,8.02718756 16.0286384,8.56556562 16.0218476,9.26818871 C16.0080799,10.5486366 14.8460128,11.376058 13.0610509,11.376058 C12.2978746,11.3694253 11.5627918,11.2180965 11.163808,11.0475679 L11.4018587,9.66204513 L11.6258627,9.76066195 C12.1788958,9.99070971 12.5428092,10.0889775 13.221984,10.0889775 C13.7117601,10.0889775 14.2368857,9.89837643 14.2435835,9.48488392 C14.2435835,9.21565125 14.0198586,9.01850486 13.3617074,8.7164581 C12.717789,8.42086943 11.8568435,7.92848346 11.8707973,7.04197926 C11.8780532,5.84042483 13.0610509,5 14.7409877,5 C15.3990458,5 15.9312413,5.13788902 16.2667821,5.26277458 Z M18.5277524,9.0974856 L19.941731,9.0974856 C19.8717762,8.78889347 19.549631,7.31147374 19.549631,7.31147374 L19.4307452,6.77964104 C19.3467437,7.00942698 19.1998574,7.38373457 19.2069273,7.37055657 C19.2069273,7.37055657 18.6678479,8.74290137 18.5277524,9.0974856 Z M20.6276036,5.1118821 L22,11.2839865 L20.4249023,11.2839865 C20.4249023,11.2839865 20.2707601,10.5748181 20.221922,10.3581228 L18.0377903,10.3581228 C17.9746264,10.5221933 17.6807607,11.2839865 17.6807607,11.2839865 L15.8957988,11.2839865 L18.4226343,5.62399144 C18.5977072,5.22341512 18.9059917,5.1118821 19.3117663,5.1118821 L20.6276036,5.1118821 L20.6276036,5.1118821 Z"
                                                                                                id="Shape"
                                                                                                fill="#171E6C"></path>
                                                                                        </g>
                                                                                    </g>
                                                                                </g>
                                                                            </g>
                                                                        </g>
                                                                    </svg>
                                                                </div>
                                                                <div id="card-master" class="card-img">
                                                                    <svg width="24" height="16" viewBox="0 0 24 16"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <g fill="none" fill-rule="evenodd">
                                                                            <rect fill="#252525" height="16" rx="2"
                                                                                width="24"></rect>
                                                                            <circle cx="9" cy="8" fill="#eb001b" r="5">
                                                                            </circle>
                                                                            <circle cx="15" cy="8" fill="#f79e1b" r="5">
                                                                            </circle>
                                                                            <path
                                                                                d="m12 3.99963381c1.2144467.91220633 2 2.36454836 2 4.00036619s-.7855533 3.0881599-2 4.0003662c-1.2144467-.9122063-2-2.36454837-2-4.0003662s.7855533-3.08815986 2-4.00036619z"
                                                                                fill="#ff5f00"></path>
                                                                        </g>
                                                                    </svg>
                                                                </div>
                                                                <div id="card-amex" class="card-img">
                                                                    <svg width="24" height="16" viewBox="0 0 24 16"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <g fill="none" fill-rule="evenodd">
                                                                            <rect fill="#016fd0" height="16" rx="2"
                                                                                width="24"></rect>
                                                                            <path
                                                                                d="m13.7640663 13.3938564v-5.70139231l10.1475359.00910497v1.57489503l-1.1728619 1.25339231 1.1728619 1.2648839v1.6083094h-1.8726188l-.9951823-1.0981657-.9881105 1.1023204z"
                                                                                fill="#fffffe"></path>
                                                                            <path
                                                                                d="m14.4418122 12.7687956v-4.448884h3.7722872v1.02488398h-2.550895v.69569062h2.4900774v1.0078232h-2.4900774v.6833149h2.550895v1.0371713z"
                                                                                fill="#016fd0"></path>
                                                                            <path
                                                                                d="m18.1952707 12.7687956 2.087337-2.2270055-2.0874254-2.2217901h1.6156464l1.2754917 1.41003315 1.2791161-1.41003315h1.5461657v.03500552l-2.0428729 2.18678458 2.0428729 2.1638895v.063116h-1.5617237l-1.2981216-1.4241768-1.2847735 1.4241768z"
                                                                                fill="#016fd0"></path>
                                                                            <path
                                                                                d="m14.2373481 2.6319558h2.4460552l.8591381 1.95085083v-1.95085083h3.0198453l.5207514 1.46156906.5225194-1.46156906h2.3059447v5.70139227h-12.1865193z"
                                                                                fill="#fffffe"></path>
                                                                            <g fill="#016fd0">
                                                                                <path
                                                                                    d="m14.7004641 3.25135912-1.9740111 4.44517127h1.3539006l.3724199-.89016575h2.0179447l.3721547.89016575h1.3875801l-1.96579-4.44517127zm.1696353 2.55743646.592-1.41507182.5915581 1.41507182z">
                                                                                </path>
                                                                                <path
                                                                                    d="m18.2119779 7.69573481v-4.44508288l1.903116.00654144.9792707 2.73272928.9856354-2.73927072h1.8316022v4.44508288l-1.1786077.01043094v-3.05334807l-1.1125746 3.04291713h-1.0758011l-1.1356464-3.05334807v3.05334807z">
                                                                                </path>
                                                                            </g>
                                                                        </g>
                                                                    </svg>
                                                                </div>
                                                                <div id="card-diners" class="card-img">
                                                                    <svg width="24" height="16" viewBox="0 0 24 16"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <g id="319" stroke="none" stroke-width="1"
                                                                            fill="none" fill-rule="evenodd">
                                                                            <g id="New-Icons"
                                                                                transform="translate(-320.000000, -280.000000)"
                                                                                fill-rule="nonzero">
                                                                                <g id="Card-Brands"
                                                                                    transform="translate(40.000000, 200.000000)">
                                                                                    <g id="Color"
                                                                                        transform="translate(0.000000, 80.000000)">
                                                                                        <g id="Diners-Club"
                                                                                            transform="translate(280.000000, 0.000000)">
                                                                                            <path
                                                                                                d="M21.9972414,15.749927 L21.999381,15.7499362 C22.9544683,15.7581106 23.73806,14.9772525 23.75,14.0041555 L23.7500083,2.00630219 C23.7461702,1.53568921 23.5588633,1.08617106 23.2297297,0.756801782 C22.9014319,0.428268884 22.4589161,0.246148853 21.9972414,0.250070854 L2.00063,0.250061791 C1.54108393,0.246148853 1.09856813,0.428268884 0.77027028,0.756801782 C0.441136651,1.08617106 0.253829819,1.53568921 0.25,2.00426336 L0.249991686,13.9936957 C0.253829819,14.4643086 0.441136651,14.9138268 0.77027028,15.2431961 C1.09856813,15.571729 1.54108393,15.753849 2.00275862,15.749927 L21.9972414,15.749927 Z M21.996203,16.249927 C21.9958359,16.249924 21.9954688,16.249921 21.9951018,16.2499178 L21.9972414,16.249927 L21.996203,16.249927 Z"
                                                                                                id="shape"
                                                                                                stroke-opacity="0.2"
                                                                                                stroke="#000000"
                                                                                                stroke-width="0.5"
                                                                                                fill="#FFFFFF"></path>
                                                                                            <path
                                                                                                d="M10.0021142,2.05179033 L10.0021142,2.03579033 L14.0021142,2.03579033 L14.0021142,2.05179033 C17.1375481,2.28122918 19.5642283,4.89197286 19.5642283,8.03579033 C19.5642283,11.1796078 17.1375481,13.7903515 14.0021142,14.0197903 L14.0021142,14.0357903 L10.0021142,14.0357903 L10.0021142,14.0197903 C6.86668021,13.7903515 4.44,11.1796078 4.44,8.03579033 C4.44,4.89197286 6.86668021,2.28122918 10.0021142,2.05179033 Z"
                                                                                                id="shape"
                                                                                                fill="#0165AC"></path>
                                                                                            <path
                                                                                                d="M11.6021142,11.4277903 C13.0374002,10.9175027 13.9961556,9.55908923 13.9961556,8.03579033 C13.9961556,6.51249143 13.0374002,5.15407792 11.6021142,4.64379033 L11.6021142,11.4277903 L11.6021142,11.4277903 Z M9.20211417,4.64379033 C7.76682809,5.15407792 6.80807271,6.51249143 6.80807271,8.03579033 C6.80807271,9.55908923 7.76682809,10.9175027 9.20211417,11.4277903 L9.20211417,4.64379033 L9.20211417,4.64379033 Z M10.4021142,13.2357903 C7.53023347,13.2357903 5.20211417,10.907671 5.20211417,8.03579033 C5.20211417,5.16390963 7.53023347,2.83579033 10.4021142,2.83579033 C13.2739949,2.83579033 15.6021142,5.16390963 15.6021142,8.03579033 C15.6021142,10.907671 13.2739949,13.2357903 10.4021142,13.2357903 Z"
                                                                                                id="shape"
                                                                                                fill="#FFFFFF"></path>
                                                                                        </g>
                                                                                    </g>
                                                                                </g>
                                                                            </g>
                                                                        </g>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <label>CVV</label>
                                                                <input id="card-cvv" onkeyup="validateInputCvv()"
                                                                    onkeydown="return validateNumbers(event);"
                                                                    type="text" class="form-control" required>
                                                                <div id="validateCvvTxt" class="invalid-feedback"
                                                                    style="display: none;">
                                                                    CVV no válido
                                                                </div>
                                                            </div><!-- End .col-sm-6 -->

                                                            <div class="col-sm-6">
                                                                <label>Fecha Expiración</label>
                                                                <input id="card-date" onkeyup="validateDate()"
                                                                    type="text" placeholder="MM/AA" class="form-control"
                                                                    required>
                                                                <div id="validateDateTxt" class="invalid-feedback"
                                                                    style="display: none;">
                                                                    Fecha no válida
                                                                </div>
                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->

                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <button type="submit" onclick="oneTimePay()"
                                                                    class="btn btn-outline-primary-2 btn-order btn-block">
                                                                    <span class="btn-text">Hacer Pago</span>
                                                                    <span class="btn-hover-text">Hacer Pago</span>
                                                                </button>
                                                            </div><!-- End .col-sm-6 -->

                                                            <div class="col-sm-6">
                                                                <button type="submit" onclick="suscribePay()"
                                                                    class="btn btn-outline-primary-2 btn-order btn-block">
                                                                    <span class="btn-text">Suscribirse</span>
                                                                    <span class="btn-hover-text">Suscribirse</span>
                                                                </button>
                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->

                                                    </form>
                                                </div><!-- End .card-body -->
                                            </div><!-- End .collapse -->
                                        </div><!-- End .card -->
                                <!-- Kushki.js v1-->

                                <!-- Kushki.js v2-->
                                        <div class="card">
                                            <div class="card-header" id="heading3-2">
                                                <h2 class="card-title">
                                                    <a class="collapsed" role="button" data-toggle="collapse"
                                                        href="#collapse3-2" aria-expanded="false"
                                                        aria-controls="collapse3-2">
                                                        Tarjeta de Crédito - Kushki.js v2
                                                    </a>
                                                </h2>
                                            </div><!-- End .card-header -->
                                            <div id="collapse3-2" class="collapse" aria-labelledby="heading3-2"
                                                data-parent="#accordion-3">
                                                <div class="card-body">
                                                    <form id="credit-card-form-v2" action="#" onsubmit="">
                                                        <!--se modificó el id de "credit-card-form" a "credit-card-form-v2" para implementación de kushki.js v2--->

                                                        <!-- Desde acá se reemplaza por lo siguiente para Kushki.js v2

                                                        <label>Nombre</label>
                                                        <input id="credit-card-name" type="text" class="form-control"
                                                            required>
                                                        <div class="form-group-card">
                                                            <label>Número de tarjeta</label>
                                                            <input id="credit-card-number" type="text"
                                                                class="form-control" required>
                                                            <div id="validateCardNumTxt" class="invalid-feedback"
                                                                style="display: none;">
                                                                Número de tarjeta no válido
                                                            </div>
                                                            <div class="card-type-display">
                                                                <div id="card-visa" class="card-img ">
                                                                    <svg width="24" height="16" viewBox="0 0 24 16"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <g stroke="none" stroke-width="1" fill="none"
                                                                            fill-rule="evenodd">
                                                                            <g id="New-Icons"
                                                                                transform="translate(-80.000000, -280.000000)"
                                                                                fill-rule="nonzero">
                                                                                <g id="Card-Brands"
                                                                                    transform="translate(40.000000, 200.000000)">
                                                                                    <g id="Color"
                                                                                        transform="translate(0.000000, 80.000000)">
                                                                                        <g id="Visa"
                                                                                            transform="translate(40.000000, 0.000000)">
                                                                                            <rect stroke-opacity="0.2"
                                                                                                stroke="#000000"
                                                                                                stroke-width="0.5"
                                                                                                fill="#FFFFFF" x="0.25"
                                                                                                y="0.25" width="23.5"
                                                                                                height="15.5" rx="2">
                                                                                            </rect>
                                                                                            <path
                                                                                                d="M2.78773262,5.91443732 C2.26459089,5.62750595 1.6675389,5.39673777 1,5.23659312 L1.0280005,5.1118821 L3.76497922,5.1118821 C4.13596254,5.12488556 4.43699113,5.23650585 4.53494636,5.63071135 L5.12976697,8.46659052 L5.31198338,9.32072617 L6.97796639,5.1118821 L8.77678896,5.1118821 L6.10288111,11.2775284 L4.30396552,11.2775284 L2.78773262,5.91443732 L2.78773262,5.91443732 Z M10.0999752,11.2840738 L8.39882877,11.2840738 L9.46284763,5.1118821 L11.163901,5.1118821 L10.0999752,11.2840738 Z M16.2667821,5.26277458 L16.0354292,6.59558538 L15.881566,6.53004446 C15.5737466,6.40524617 15.1674138,6.28053516 14.6143808,6.29371316 C13.942741,6.29371316 13.6415263,6.56277129 13.6345494,6.82545859 C13.6345494,7.11441463 13.998928,7.3048411 14.5939153,7.58725177 C15.5740257,8.02718756 16.0286384,8.56556562 16.0218476,9.26818871 C16.0080799,10.5486366 14.8460128,11.376058 13.0610509,11.376058 C12.2978746,11.3694253 11.5627918,11.2180965 11.163808,11.0475679 L11.4018587,9.66204513 L11.6258627,9.76066195 C12.1788958,9.99070971 12.5428092,10.0889775 13.221984,10.0889775 C13.7117601,10.0889775 14.2368857,9.89837643 14.2435835,9.48488392 C14.2435835,9.21565125 14.0198586,9.01850486 13.3617074,8.7164581 C12.717789,8.42086943 11.8568435,7.92848346 11.8707973,7.04197926 C11.8780532,5.84042483 13.0610509,5 14.7409877,5 C15.3990458,5 15.9312413,5.13788902 16.2667821,5.26277458 Z M18.5277524,9.0974856 L19.941731,9.0974856 C19.8717762,8.78889347 19.549631,7.31147374 19.549631,7.31147374 L19.4307452,6.77964104 C19.3467437,7.00942698 19.1998574,7.38373457 19.2069273,7.37055657 C19.2069273,7.37055657 18.6678479,8.74290137 18.5277524,9.0974856 Z M20.6276036,5.1118821 L22,11.2839865 L20.4249023,11.2839865 C20.4249023,11.2839865 20.2707601,10.5748181 20.221922,10.3581228 L18.0377903,10.3581228 C17.9746264,10.5221933 17.6807607,11.2839865 17.6807607,11.2839865 L15.8957988,11.2839865 L18.4226343,5.62399144 C18.5977072,5.22341512 18.9059917,5.1118821 19.3117663,5.1118821 L20.6276036,5.1118821 L20.6276036,5.1118821 Z"
                                                                                                id="Shape"
                                                                                                fill="#171E6C"></path>
                                                                                        </g>
                                                                                    </g>
                                                                                </g>
                                                                            </g>
                                                                        </g>
                                                                    </svg>
                                                                </div>
                                                                <div id="card-master" class="card-img">
                                                                    <svg width="24" height="16" viewBox="0 0 24 16"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <g fill="none" fill-rule="evenodd">
                                                                            <rect fill="#252525" height="16" rx="2"
                                                                                width="24"></rect>
                                                                            <circle cx="9" cy="8" fill="#eb001b" r="5">
                                                                            </circle>
                                                                            <circle cx="15" cy="8" fill="#f79e1b" r="5">
                                                                            </circle>
                                                                            <path
                                                                                d="m12 3.99963381c1.2144467.91220633 2 2.36454836 2 4.00036619s-.7855533 3.0881599-2 4.0003662c-1.2144467-.9122063-2-2.36454837-2-4.0003662s.7855533-3.08815986 2-4.00036619z"
                                                                                fill="#ff5f00"></path>
                                                                        </g>
                                                                    </svg>
                                                                </div>
                                                                <div id="card-amex" class="card-img">
                                                                    <svg width="24" height="16" viewBox="0 0 24 16"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <g fill="none" fill-rule="evenodd">
                                                                            <rect fill="#016fd0" height="16" rx="2"
                                                                                width="24"></rect>
                                                                            <path
                                                                                d="m13.7640663 13.3938564v-5.70139231l10.1475359.00910497v1.57489503l-1.1728619 1.25339231 1.1728619 1.2648839v1.6083094h-1.8726188l-.9951823-1.0981657-.9881105 1.1023204z"
                                                                                fill="#fffffe"></path>
                                                                            <path
                                                                                d="m14.4418122 12.7687956v-4.448884h3.7722872v1.02488398h-2.550895v.69569062h2.4900774v1.0078232h-2.4900774v.6833149h2.550895v1.0371713z"
                                                                                fill="#016fd0"></path>
                                                                            <path
                                                                                d="m18.1952707 12.7687956 2.087337-2.2270055-2.0874254-2.2217901h1.6156464l1.2754917 1.41003315 1.2791161-1.41003315h1.5461657v.03500552l-2.0428729 2.18678458 2.0428729 2.1638895v.063116h-1.5617237l-1.2981216-1.4241768-1.2847735 1.4241768z"
                                                                                fill="#016fd0"></path>
                                                                            <path
                                                                                d="m14.2373481 2.6319558h2.4460552l.8591381 1.95085083v-1.95085083h3.0198453l.5207514 1.46156906.5225194-1.46156906h2.3059447v5.70139227h-12.1865193z"
                                                                                fill="#fffffe"></path>
                                                                            <g fill="#016fd0">
                                                                                <path
                                                                                    d="m14.7004641 3.25135912-1.9740111 4.44517127h1.3539006l.3724199-.89016575h2.0179447l.3721547.89016575h1.3875801l-1.96579-4.44517127zm.1696353 2.55743646.592-1.41507182.5915581 1.41507182z">
                                                                                </path>
                                                                                <path
                                                                                    d="m18.2119779 7.69573481v-4.44508288l1.903116.00654144.9792707 2.73272928.9856354-2.73927072h1.8316022v4.44508288l-1.1786077.01043094v-3.05334807l-1.1125746 3.04291713h-1.0758011l-1.1356464-3.05334807v3.05334807z">
                                                                                </path>
                                                                            </g>
                                                                        </g>
                                                                    </svg>
                                                                </div>
                                                                <div id="card-diners" class="card-img">
                                                                    <svg width="24" height="16" viewBox="0 0 24 16"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <g id="319" stroke="none" stroke-width="1"
                                                                            fill="none" fill-rule="evenodd">
                                                                            <g id="New-Icons"
                                                                                transform="translate(-320.000000, -280.000000)"
                                                                                fill-rule="nonzero">
                                                                                <g id="Card-Brands"
                                                                                    transform="translate(40.000000, 200.000000)">
                                                                                    <g id="Color"
                                                                                        transform="translate(0.000000, 80.000000)">
                                                                                        <g id="Diners-Club"
                                                                                            transform="translate(280.000000, 0.000000)">
                                                                                            <path
                                                                                                d="M21.9972414,15.749927 L21.999381,15.7499362 C22.9544683,15.7581106 23.73806,14.9772525 23.75,14.0041555 L23.7500083,2.00630219 C23.7461702,1.53568921 23.5588633,1.08617106 23.2297297,0.756801782 C22.9014319,0.428268884 22.4589161,0.246148853 21.9972414,0.250070854 L2.00063,0.250061791 C1.54108393,0.246148853 1.09856813,0.428268884 0.77027028,0.756801782 C0.441136651,1.08617106 0.253829819,1.53568921 0.25,2.00426336 L0.249991686,13.9936957 C0.253829819,14.4643086 0.441136651,14.9138268 0.77027028,15.2431961 C1.09856813,15.571729 1.54108393,15.753849 2.00275862,15.749927 L21.9972414,15.749927 Z M21.996203,16.249927 C21.9958359,16.249924 21.9954688,16.249921 21.9951018,16.2499178 L21.9972414,16.249927 L21.996203,16.249927 Z"
                                                                                                id="shape"
                                                                                                stroke-opacity="0.2"
                                                                                                stroke="#000000"
                                                                                                stroke-width="0.5"
                                                                                                fill="#FFFFFF"></path>
                                                                                            <path
                                                                                                d="M10.0021142,2.05179033 L10.0021142,2.03579033 L14.0021142,2.03579033 L14.0021142,2.05179033 C17.1375481,2.28122918 19.5642283,4.89197286 19.5642283,8.03579033 C19.5642283,11.1796078 17.1375481,13.7903515 14.0021142,14.0197903 L14.0021142,14.0357903 L10.0021142,14.0357903 L10.0021142,14.0197903 C6.86668021,13.7903515 4.44,11.1796078 4.44,8.03579033 C4.44,4.89197286 6.86668021,2.28122918 10.0021142,2.05179033 Z"
                                                                                                id="shape"
                                                                                                fill="#0165AC"></path>
                                                                                            <path
                                                                                                d="M11.6021142,11.4277903 C13.0374002,10.9175027 13.9961556,9.55908923 13.9961556,8.03579033 C13.9961556,6.51249143 13.0374002,5.15407792 11.6021142,4.64379033 L11.6021142,11.4277903 L11.6021142,11.4277903 Z M9.20211417,4.64379033 C7.76682809,5.15407792 6.80807271,6.51249143 6.80807271,8.03579033 C6.80807271,9.55908923 7.76682809,10.9175027 9.20211417,11.4277903 L9.20211417,4.64379033 L9.20211417,4.64379033 Z M10.4021142,13.2357903 C7.53023347,13.2357903 5.20211417,10.907671 5.20211417,8.03579033 C5.20211417,5.16390963 7.53023347,2.83579033 10.4021142,2.83579033 C13.2739949,2.83579033 15.6021142,5.16390963 15.6021142,8.03579033 C15.6021142,10.907671 13.2739949,13.2357903 10.4021142,13.2357903 Z"
                                                                                                id="shape"
                                                                                                fill="#FFFFFF"></path>
                                                                                        </g>
                                                                                    </g>
                                                                                </g>
                                                                            </g>
                                                                        </g>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <label>CVV</label>
                                                                <input id="card-cvv" onkeyup="validateInputCvv()"
                                                                    onkeydown="return validateNumbers(event);"
                                                                    type="text" class="form-control" required>
                                                                <div id="validateCvvTxt" class="invalid-feedback"
                                                                    style="display: none;">
                                                                    CVV no válido
                                                                </div>
                                                            </div><!~~ End .col-sm-6 ~~>

                                                            <div class="col-sm-6">
                                                                <label>Fecha Expiración</label>
                                                                <input id="card-date" onkeyup="validateDate()"
                                                                    type="text" placeholder="MM/AA" class="form-control"
                                                                    required>
                                                                <div id="validateDateTxt" class="invalid-feedback"
                                                                    style="display: none;">
                                                                    Fecha no válida
                                                                </div>
                                                            </div><!~~ End .col-sm-6 ~~>
                                                        </div><!~~ End .row ~~>

                                                    Hasta acá se reemplaza por lo siguiente para kushki.js v2-->

                                                        <!-- Generar formulario en Kushki.js v2-->
                                                    
                                                        <div>
                                                            <div id="cardHolderName_id"></div>
                                                            <div id="cardNumber_id"></div>
                                                            <div id="expirationDate_id"></div>
                                                            <div id="cvv_id"></div>
                                                            <div id="deferred_id"></div>

                                                            <button type="submit" onclick="oneTimePayv2()"
                                                                class="btn btn-outline-primary-2 btn-order btn-block">
                                                                <span class="btn-text">Hacer Pago</span>
                                                                <span class="btn-hover-text">Hacer Pago</span>
                                                            </button>
                                                        </div>
                                                        <!-- Generar formulario en Kushki.js v2-->
                                                    </form>
                                                </div><!-- End .card-body -->
                                            </div><!-- End .collapse -->
                                        </div><!-- End .card -->
                                <!-- Kushki.js v2-->


                                        <div class="card">
                                            <div class="card-header" id="heading3-3">
                                                <h2 class="card-title">
                                                    <a class="collapsed" id="cash-acordeon" role="button"
                                                        data-toggle="collapse" href="#collapse3-3" aria-expanded="false"
                                                        aria-controls="collapse3-3">
                                                        Efectivo
                                                    </a>
                                                </h2>
                                            </div><!-- End .card-header -->
                                            <div id="collapse3-3" class="collapse" aria-labelledby="heading3-3"
                                                data-parent="#accordion-3">
                                                <div class="card-body">
                                                    <form action="#" onsubmit="return cashPay(event)">
                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <label>Nombre</label>
                                                                <input id="cash-name" type="text" class="form-control"
                                                                    required>
                                                            </div><!-- End .col-sm-6 -->

                                                            <div class="col-sm-6">
                                                                <label>Apellido</label>
                                                                <input id="cash-lastname" type="text"
                                                                    class="form-control" required>

                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->
                                                        <div class="row">
                                                            <div class="col-sm-6">

                                                                <label>Email</label>
                                                                <input id="cash-email" type="email" class="form-control"
                                                                    required>

                                                            </div><!-- End .col-sm-6 -->

                                                            <div class="col-sm-6">
                                                                <label>Documento</label>
                                                                <input id="cash-document" type="text"
                                                                    class="form-control" required>

                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->

                                                        <button type="submit"
                                                            class="btn btn-outline-primary-2 btn-order btn-block">
                                                            <span class="btn-text">Hacer Pago</span>
                                                            <span class="btn-hover-text">Hacer Pago</span>
                                                        </button>
                                                    </form>
                                                </div><!-- End .card-body -->
                                            </div><!-- End .collapse -->
                                        </div><!-- End .card -->


                                        <div class="card">
                                            <div class="card-header" id="heading3-4">
                                                <h2 class="card-title">
                                                    <a class="collapsed" role="button" data-toggle="collapse"
                                                        href="#collapse3-4" aria-expanded="false"
                                                        aria-controls="collapse3-4">
                                                        Transferencia Bancaria
                                                    </a>
                                                </h2>
                                            </div><!-- End .card-header -->
                                            <div id="collapse3-4" class="collapse" aria-labelledby="heading3-4"
                                                data-parent="#accordion-3">
                                                <div class="card-body">
                                                    <form action="#" onsubmit="return transferPay(event)">
                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <label>Nombre</label>
                                                                <input id="transfer-name" type="text"
                                                                    class="form-control" required>
                                                            </div><!-- End .col-sm-6 -->

                                                            <div class="col-sm-6">
                                                                <label>Apellido</label>
                                                                <input id="transfer-lastname" type="text"
                                                                    class="form-control" required>

                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->
                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <label for="transfer-userType">Tipo de persona:</label>
                                                                <select id="transfer-userType" class="form-control"
                                                                    name="transfer-userType" required>
                                                                    <option value="1">Natural</option>
                                                                    <option value="2">Jurídica</option>
                                                                </select>
                                                            </div><!-- End .col-sm-6 -->
                                                            <div class="col-sm-6">
                                                                <label>Documento</label>
                                                                <input id="transfer-document" type="text"
                                                                    class="form-control" required>

                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->
                                                        <label for="transfer-bank">Seleccione su banco:</label>
                                                        <select id="transfer-bank" class="form-control"
                                                            name="transfer-bank" required>

                                                        </select>
                                                        <label>Email</label>
                                                        <input id="transfer-email" type="email" class="form-control"
                                                            required>
                                                        <button type="submit"
                                                            class="btn btn-outline-primary-2 btn-order btn-block">
                                                            <span class="btn-text">Hacer Pago</span>
                                                            <span class="btn-hover-text">Hacer Pago</span>
                                                        </button>
                                                    </form>
                                                </div><!-- End .card-body -->
                                            </div><!-- End .collapse -->
                                        </div><!-- End .card -->
                                    </div><!-- End .accordion -->
                                </div><!-- End .col-md-6 -->
                            </div><!-- End .col-lg-9 -->
                            <aside class="col-lg-3">
                                <div class="summary">
                                    <h3 class="summary-title">Tu Pedido</h3><!-- End .summary-title -->

                                    <table class="table table-summary">
                                        <thead>
                                            <tr>
                                                <th>Producto</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>

                                        <tbody id="products-list">

                                        </tbody>
                                    </table><!-- End .table table-summary -->

                                </div><!-- End .summary -->
                            </aside><!-- End .col-lg-3 -->
                        </div><!-- End .row -->
                    </div><!-- End .container -->
                </div><!-- End .checkout -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <footer class="footer">

        </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>


    <!-- Code Modal -->
    <div class="modal fade" id="code-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body padding">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="icon-close"></i></span>
                    </button>
                    <pre><code class="language-javascript" id="jscode"></code></pre>
                    <button data-dismiss="modal" onclick="finish()"
                        class="btn btn-outline-primary-2 btn-order btn-block">
                        <span class="btn-text">Finalizar</span>
                        <span class="btn-hover-text">Finalizar</span>
                    </button>
                </div><!-- End .modal-body -->
            </div><!-- End .modal-content -->
        </div><!-- End .modal-dialog -->
    </div><!-- End .modal -->


    <!-- Plugins JS File -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.hoverIntent.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/superfish.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/bootstrap-input-spinner.js"></script>
    <script src="assets/js/jquery.plugin.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/jquery.countdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdn.kushkipagos.com/kushki.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Assets -->
    <script src="assets/json/categories.js"></script>
    <script src="assets/json/brands.js"></script>
    <script src="assets/json/products.js"></script>
    <script src="assets/json/credentials.js"></script>
    <!-- Components -->
    <script src="components/header.js"></script>
    <script src="components/footer.js"></script>
    <!-- Bussiness -->
    <script src="js/LoadProducts.js"></script>
    <script src="js/LoadBrands.js"></script>
    <!--  <script src="js/LoadCheckout.js"></script> -->
    <!-- Main JS File -->
    <script src="js/main.js"></script>
    <script src="js/checkoutMain.js"></script>
    <script src="assets/js/demos/demo-4.js"></script>
    <!-- Kushki.js 2.0 -->
    <!-- UAT 
    <script src="https://cdn.kushkipagos.com/js/kushki.min.js"></script>
    <script src="https://cdn.kushkipagos.com/js/card.min.js"></script>
    -->
    <!-- DEV -->
    <script src="https://cdn-qa.kushkipagos.blue/js/latest/kushki.min.js"></script>
    <script src="https://cdn-qa.kushkipagos.blue/js/latest/card.min.js"></script>
</body>

<script>

    var totalG = 0;
    function loadCheckout() {
        var cartProducts = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : []
        const currency = localStorage.getItem('currency') ?? 'COP';
        var prodsHtml = '';
        var total = 0;
        cartProducts.forEach(product => {
            let prodFilter = products().filter((ele) => ele.reference == product.reference)[0]
            let subtotal = product.quantity * prodFilter[currency] * 0.81;
            total += product.quantity * prodFilter[currency]

            prodsHtml += `<tr>
                    <td><a href="product.html?reference=${product.reference}">${prodFilter.name}</a></td>
                    <td>${currency} ${formatNumber(subtotal.toFixed(2))}</td>
                    </tr>`
            totalG = 0 + total;
        })

        var html = `${prodsHtml}
            <tr class="summary-subtotal">
                <td>Subtotal:</td>
                <td>${currency} ${formatNumber((total * 0.81).toFixed(2))}</td>
            </tr><!-- End .summary-subtotal -->
            <tr>
                <td>IVA:</td>
                <td>${currency} ${formatNumber((total * 0.19).toFixed(2))}</td>
            </tr>
            <tr>
                <td>Shipping:</td>
                <td>Free shipping</td>
            </tr>
            <tr class="summary-total">
                <td>Total:</td>
                <td>${currency} ${formatNumber((total).toFixed(2))}</td>
            </tr><!-- End .summary-total -->`

        $('#products-list').html(html);


        return totalG
    }

    function validarTarjeta(cardNumber) {
        // Verifica que la longitud del número de tarjeta sea correcta
        if (cardNumber.length > 16 || cardNumber.length < 14 || !/^\d+$/.test(cardNumber)) {
            $('#validateCardNumTxt').show()
            $("#credit-card-number").removeClass("is-valid");
            $("#credit-card-number").addClass("is-invalid");
            return false;
        }

        $("#credit-card-number").removeClass("is-invalid");
        $("#credit-card-number").addClass("is-valid");
        $('#validateCardNumTxt').hide()
        return true;
    }

    function validarCvv(cardNumber) {
        // Verifica que la longitud del número de tarjeta sea correcta
        if (cardNumber.length == 3 || cardNumber.length == 4) {
            $("#card-cvv").removeClass("is-invalid");
            $("#card-cvv").addClass("is-valid");
            $('#validateCvvTxt').hide()
        } else {
            $('#validateCvvTxt').show()
            $("#card-cvv").removeClass("is-valid");
            $("#card-cvv").addClass("is-invalid");
        }

    }

    function validateDate() {
        var inputDate = $('#card-date').val()
        var currentDate = new Date();
        var currentMonth = currentDate.getMonth() + 1; // Agregamos 1 porque los meses comienzan desde 0
        var currentYear = currentDate.getFullYear() % 100; // Obtenemos solo los últimos 2 dígitos del año

        // Validamos que el formato de fecha sea correcto (MM/AA)
        if (!/^\d{2}\/\d{2}$/.test(inputDate)) {
            $('#validateDateTxt').show()
            $("#card-date").removeClass("is-valid");
            $("#card-date").addClass("is-invalid");
            return false;
        }

        // Separamos el mes y el año ingresados por el usuario
        var parts = inputDate.split("/");
        var month = parseInt(parts[0]);
        var year = parseInt(parts[1]);

        // Validamos que la fecha ingresada sea mayor que la actual
        if (year < currentYear || (year == currentYear && month <= currentMonth)) {
            $('#validateDateTxt').show()
            $("#card-date").removeClass("is-valid");
            $("#card-date").addClass("is-invalid");
            return false;
        }

        $("#card-date").removeClass("is-invalid");
        $("#card-date").addClass("is-valid");
        $('#validateDateTxt').hide()
        return true;
    }

    function mostrarIconoTarjeta(bin_tarjeta) {
        if (bin_tarjeta.startsWith("4")) {
            $("#card-master").addClass("card-img--unselected");
            $("#card-amex").addClass("card-img--unselected");
            $("#card-diners").addClass("card-img--unselected");
            $("#card-visa").removeClass("card-img--unselected");
        } else if (bin_tarjeta.startsWith("5")) {
            $("#card-visa").addClass("card-img--unselected");
            $("#card-amex").addClass("card-img--unselected");
            $("#card-diners").addClass("card-img--unselected");
            $("#card-master").removeClass("card-img--unselected");
        } else if (bin_tarjeta.startsWith("37")) {
            $("#card-visa").addClass("card-img--unselected");
            $("#card-master").addClass("card-img--unselected");
            $("#card-diners").addClass("card-img--unselected");
            $("#card-amex").removeClass("card-img--unselected");
        } else if (bin_tarjeta != '') {
            $("#card-visa").addClass("card-img--unselected");
            $("#card-master").addClass("card-img--unselected");
            $("#card-amex").addClass("card-img--unselected");
            $("#card-diners").removeClass("card-img--unselected");
        } else {
            $("#card-visa").removeClass("card-img--unselected");
            $("#card-master").removeClass("card-img--unselected");
            $("#card-amex").removeClass("card-img--unselected");
            $("#card-diners").removeClass("card-img--unselected");
        }
    }

    var cardContent = ''

    function validateNumbers(evt) {
        var key = evt.key;
        if (key >= 0 && key <= 9 || key == 'Backspace' || key == 'Delete') {
            return true;
        }
        return false;

    }

    function validateCardNumbers(evt) {
        evt.preventDefault()
        var key = evt.key;
        if ((key >= 0 && key <= 9) || key == 'Backspace') {
            if (key >= 0 && key <= 9) {
                cardContent += key
                let longitud = cardContent.length;
                let masked = longitud > 4 ? "*".repeat(longitud - 4) + cardContent.slice(-4) : "*".repeat(longitud)
                $('#credit-card-number').val(masked)
            } else if (key == 'Backspace') {
                let longitud = cardContent.length;
                cardContent = cardContent.slice(0, longitud - 1)
                longitud = longitud - 1;
                let masked = longitud > 4 ? "*".repeat(longitud - 4) + cardContent.slice(-4) : "*".repeat(longitud)
                $('#credit-card-number').val(masked)
            }
            console.log(cardContent);
            mostrarIconoTarjeta(cardContent)
            validarTarjeta(cardContent);
            //return true;
        }
        //return false;

    }

    var inputElement = document.getElementById('credit-card-number')

    inputElement.addEventListener('input', (event) => {
        if (event.inputType == 'insertText') {
            var key = event.data;
            if (key >= 0 && key <= 9) {
                cardContent += key
                let longitud = cardContent.length;
                let masked = longitud > 4 ? "*".repeat(longitud - 4) + cardContent.slice(-4) : "*".repeat(longitud)
                inputElement.value = masked
            }
        } else if (event.inputType == 'deleteContentBackward') {
            let longitud = cardContent.length;
            cardContent = cardContent.slice(0, longitud - 1)
            longitud = longitud - 1;
            let masked = longitud > 4 ? "*".repeat(longitud - 4) + cardContent.slice(-4) : "*".repeat(longitud)
            inputElement.value = masked
        } else {
            var value = event.target.value
            if (/^\d+$/.test(value)) {
                cardContent = value;
                let longitud = cardContent.length;
                let masked = longitud > 4 ? "*".repeat(longitud - 4) + cardContent.slice(-4) : "*".repeat(longitud)
                inputElement.value = masked
            } else {
                inputElement.value = ''
            }
        }
        mostrarIconoTarjeta(cardContent)
        validarTarjeta(cardContent);
    });

    function validateInputCvv() {
        var value = $('#card-cvv').val();
        validarCvv(value);
    }

    // inicio Kushki.js v1 card

    function oneTimePay() {
        $("#credit-card-form").off("submit");
        $("#credit-card-form").submit(function (event) {
            event.preventDefault(); // Prevent default form submission
            if (validateCardInputs()) {
                swal.fire({
                    title: 'Procesando ...',
                    didOpen() {
                        swal.showLoading()
                    },
                    didClose() {
                        swal.hideLoading()
                    },
                    allowOutsideClick: false,
                    allowEscapeKey: false,
                    allowEnterKey: false
                })
                var merchantKey = credentials();
                const currency = localStorage.getItem('currency') ?? 'CLP';
                const kushki = new Kushki({
                    merchantId: merchantKey,
                    inTestEnvironment: true,
                });
                kushki.requestToken({
                    amount: totalG,
                    currency: currency,
                    card: {
                        name: $('#credit-card-name').val(),
                        number: cardContent,
                        cvc: $('#card-cvv').val(),
                        expiryMonth: $('#card-date').val().split('/')[0],
                        expiryYear: $('#card-date').val().split('/')[1],
                    },
                }, (response) => {
                    swal.close();
                    if (response.token) {
                        var jsonHtml = `
//Respuestas
  
  String TOKEN = ${response.token}
  Float SUBTOTALIVA = ${(totalG * 0.81).toFixed(2)}
  Float SUBTOTALIVA0 = 0
  Float IVA = ${(totalG * 0.19).toFixed(2)}
  String CURRENCY = ${currency}
  

// CODIGO
  const kushki = new Kushki({
      merchantId: '${merchantKey}', 
      inTestEnvironment: true,
  });  
  kushki.requestToken({
      amount: ${totalG},
      currency: '${currency}',
      card: {
          name: '${$('#credit-card-name').val()}',
          number: '${$('#credit-card-number').val()}',
          cvc: '***',
          expiryMonth:  '${$('#card-date').val().split('/')[0]}',
          expiryYear: '${$('#card-date').val().split('/')[1]}',
      },
      }, (response) => {
      if(response.code){
          console.log(response);
          // Submit your code to your back-end
      } else {
          console.error('Error: ',response.error, 'Code: ', response.code, 'Message: ',response.message);
      }
  });
  
  
  `
                        $('#toggle-modal').click()
                        $('#jscode').html(jsonHtml)
                        hljs.highlightAll();
                        console.log(response);

                        // Submit your code to your back-end
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Hubo un error',
                            text: response.message,
                            showConfirmButton: true
                        })
                        console.error('Error: ', response.error, 'Code: ', response.code, 'Message: ', response.message);
                    }
                });
            }
        })
    }

    function suscribePay() {
        $("#credit-card-form").off("submit");
        $("#credit-card-form").submit(function (event) {
            event.preventDefault(); // Prevent default form submission
            if (validateCardInputs()) {
                swal.fire({
                    title: 'Procesando ...',
                    didOpen() {
                        swal.showLoading()
                    },
                    didClose() {
                        swal.hideLoading()
                    },
                    allowOutsideClick: false,
                    allowEscapeKey: false,
                    allowEnterKey: false
                })
                var merchantKey = credentials();
                const currency = localStorage.getItem('currency') ?? 'CLP';
                const kushki = new Kushki({
                    merchantId: merchantKey,
                    inTestEnvironment: true,
                });
                kushki.requestSubscriptionToken({
                    currency: currency,
                    card: {
                        name: $('#credit-card-name').val(),
                        number: cardContent,
                        cvc: $('#card-cvv').val(),
                        expiryMonth: $('#card-date').val().split('/')[0],
                        expiryYear: $('#card-date').val().split('/')[1],
                    },
                }, (response) => {
                    swal.close();
                    if (response.token) {
                        var jsonHtml = `
//Respuestas suscripción
  
  String TOKEN = ${response.token}
  Float SUBTOTALIVA = ${(totalG * 0.81).toFixed(2)}
  Float SUBTOTALIVA0 = 0
  Float IVA = ${(totalG * 0.19).toFixed(2)}
  String CURRENCY = ${currency}
 


// CODIGO
  const kushki = new Kushki({
      merchantId: '${merchantKey}', 
      inTestEnvironment: true,
  });  
  kushki.requestSubscriptionToken({
      currency: '${currency}',
      card: {
          name: '${$('#credit-card-name').val()}',
          number: '${$('#credit-card-number').val()}',
          cvc: '***',
          expiryMonth:  '${$('#card-date').val().split('/')[0]}',
          expiryYear: '${$('#card-date').val().split('/')[1]}',
      },
      }, (response) => {
      if(response.code){
          console.log(response);
          // Submit your code to your back-end
      } else {
          console.error('Error: ',response.error, 'Code: ', response.code, 'Message: ',response.message);
      }
  });
  
  
  `
                        $('#toggle-modal').click()
                        $('#jscode').html(jsonHtml)
                        hljs.highlightAll();
                        console.log(response);

                        // Submit your code to your back-end
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Hubo un error',
                            text: response.message,
                            showConfirmButton: true
                        })
                        console.error('Error: ', response.error, 'Code: ', response.code, 'Message: ', response.message);
                    }
                });
            }
        });
    }

    function validateCardInputs() {
        var validated = true;
        if ($('#credit-card-number').hasClass('is-invalid') || $('#card-cvv').hasClass('is-invalid')
            || $('#card-date').hasClass('is-invalid')) {
            Swal.fire({
                icon: 'error',
                title: 'Hay campos con error',
                showConfirmButton: true
            })
            validated = false;
        }
        return validated;
    }

    // fin Kushki.js v1 card

    // inicio Kushki.js v2 card

    var merchantKey = credentials();

    const currency = localStorage.getItem('currency') ?? 'COP'; // de momento solo prueba con COP

    let cardInstance

    var totalA = loadCheckout()

    const options = {
        fields: {
            cardholderName: {
                fieldType: "cardholderName",
                inputType: "text",
                label: "Nombre",
                placeholder: "Nombre del tarjetahabiente",
                selector: "cardHolderName_id",
            },
            cardNumber: {
                fieldType: "cardNumber",
                inputType: "number",
                label: "Número de tarjeta",
                maxLength: 22,
                placeholder: "Número de tarjeta",
                selector: "cardNumber_id",
            },
            cvv: {
                fieldType: "cvv",
                inputType: "password",
                label: "CVV",
                placeholder: "CVV",
                selector: "cvv_id",
            },
            deferred: {
                fieldType: "deferred",
                inputType: "text",
                label: "Diferido",
                placeholder: "Diferido",
                selector: "deferred_id",
            },
            expirationDate: {
                fieldType: "expirationDate",
                inputType: "text",
                label: "Fecha de vencimiento",
                placeholder: "Fecha de vencimiento",
                selector: "expirationDate_id",
            }
        },
        currency: currency,
        amount: {
            iva: 0,
            subtotalIva0: 0,
            subtotalIva: totalA

        }
    };


    const kushkiOptions = {
        publicCredentialId: merchantKey,
        inTest: true
    };

    init(kushkiOptions).then(kushki => {
        initCardToken(kushki, options).then(card => {
            cardInstance = card
        })

    })


    const onRequestToken = () => {
        let token
        cardInstance.requestToken().then(token => {
            //alert(token.token)
            onSuccess(token)
        }).catch(e => {
            //alert(e.message)
            onError(e)
        })
    }

    function validateCardInputsv2() {

        return true;
    }

    function onSuccess(response) {
        swal.close();
        var jsonHtml = `
//Respuestas
  
  String TOKEN = ${response.token}
  Float SUBTOTALIVA = ${(totalG * 0.81).toFixed(2)}
  Float SUBTOTALIVA0 = 0
  Float IVA = ${(totalG * 0.19).toFixed(2)}
  String CURRENCY = ${currency}
  

// CODIGO
  
  let cardInstance
    const options = {
        fields: {
            cardholderName: {
                fieldType: "cardholderName",
                inputType: "text",
                label: "Card holder name",
                placeholder: "Card holder name",
                selector: "cardHolderName_id",
            },
            cardNumber: {
                fieldType: "cardNumber",
                inputType: "number",
                label: "Número de tarjeta",
                maxLength: 22,
                placeholder: "Número de tarjeta",
                selector: "cardNumber_id",
            },
            cvv: {
                fieldType: "cvv",
                inputType: "password",
                label: "CVV",
                placeholder: "CVV",
                selector: "cvv_id",
            },
            deferred: {
                fieldType: "deferred",
                inputType: "text",
                label: "Diferido",
                placeholder: "Diferido",
                selector: "deferred_id",
            },
            expirationDate: {
                fieldType: "expirationDate",
                inputType: "text",
                label: "Fecha de vencimiento",
                placeholder: "Fecha de vencimiento",
                selector: "expirationDate_id",
            }
        },
        currency:${currency},
        amount:{
            iva:0,
            subtotalIva0:0,
            subtotalIva:${totalG}

        }
    };

    init({inTest: true, publicCredentialId: '${merchantKey}',}).then(kushki=>{
        initCardToken(kushki,options).then(card=>{
            cardInstance=card
        })

    })

    const onRequestToken=()=>{
        let token
        cardInstance.requestToken().then(token=>{
            alert(token.token)
        }).catch(e=>{
            alert(e.message)
        })
    }
  
  `
        $('#toggle-modal').click()
        $('#jscode').html(jsonHtml)
        hljs.highlightAll();

        // Submit your code to your back-end

    }

    function onError(response) {
        Swal.fire({
            icon: 'error',
            title: 'Hubo un error',
            text: response.message,
            showConfirmButton: true
        }).then((result) => {
            if (result.isConfirmed) {
                location.reload();
            } else if (result.isDenied) {
                location.reload();
            }
        });


        console.error('Error: ', response.error, 'Code: ', response.code, 'Message: ', response.message);
    }





    function oneTimePayv2() {
        $("#credit-card-form-v2").off("submit");
        $("#credit-card-form-v2").submit(function (event) {
            event.preventDefault(); // Prevent default form submission
            if (validateCardInputsv2()) {

                swal.fire({
                    title: 'Procesando ...',
                    didOpen() {
                        swal.showLoading()
                    },
                    didClose() {
                        swal.hideLoading()
                    },
                    allowOutsideClick: false,
                    allowEscapeKey: false,
                    allowEnterKey: false
                })

                const response = onRequestToken()
            }
        })
    }

/*
    function suscribePayv2() {
        $("#credit-card-form").off("submit");
        $("#credit-card-form").submit(function (event) {
            event.preventDefault(); // Prevent default form submission
            if (validateCardInputs()) {
                swal.fire({
                    title: 'Procesando ...',
                    didOpen() {
                        swal.showLoading()
                    },
                    didClose() {
                        swal.hideLoading()
                    },
                    allowOutsideClick: false,
                    allowEscapeKey: false,
                    allowEnterKey: false
                })
                var merchantKey = credentials();
                const currency = localStorage.getItem('currency') ?? 'CLP';
                const kushki = new Kushki({
                    merchantId: merchantKey,
                    inTestEnvironment: true,
                });
                kushki.requestSubscriptionToken({
                    currency: currency,
                    card: {
                        name: $('#credit-card-name').val(),
                        number: cardContent,
                        cvc: $('#card-cvv').val(),
                        expiryMonth: $('#card-date').val().split('/')[0],
                        expiryYear: $('#card-date').val().split('/')[1],
                    },
                }, (response) => {
                    swal.close();
                    if (response.token) {
                        var jsonHtml = `
//Respuestas suscripción

String TOKEN = ${response.token}
Float SUBTOTALIVA = ${(totalG * 0.81).toFixed(2)}
Float SUBTOTALIVA0 = 0
Float IVA = ${(totalG * 0.19).toFixed(2)}
String CURRENCY = ${currency}



// CODIGO
const kushki = new Kushki({
    merchantId: '${merchantKey}', 
    inTestEnvironment: true,
});  
kushki.requestSubscriptionToken({
    currency: '${currency}',
    card: {
        name: '${$('#credit-card-name').val()}',
        number: '${$('#credit-card-number').val()}',
        cvc: '***',
        expiryMonth:  '${$('#card-date').val().split('/')[0]}',
        expiryYear: '${$('#card-date').val().split('/')[1]}',
    },
    }, (response) => {
    if(response.code){
        console.log(response);
        // Submit your code to your back-end
    } else {
        console.error('Error: ',response.error, 'Code: ', response.code, 'Message: ',response.message);
    }
});


`
                        $('#toggle-modal').click()
                        $('#jscode').html(jsonHtml)
                        hljs.highlightAll();
                        console.log(response);

                        // Submit your code to your back-end
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Hubo un error',
                            text: response.message,
                            showConfirmButton: true
                        })
                        console.error('Error: ', response.error, 'Code: ', response.code, 'Message: ', response.message);
                    }
                });
            }
        });
    }
*/
    function validateCardInputs() {
        var validated = true;
        if ($('#credit-card-number').hasClass('is-invalid') || $('#card-cvv').hasClass('is-invalid')
            || $('#card-date').hasClass('is-invalid')) {
            Swal.fire({
                icon: 'error',
                title: 'Hay campos con error',
                showConfirmButton: true
            })
            validated = false;
        }
        return validated;
    }

    // fin Kushki.js v2 card

    function cashPay(event) {
        event.preventDefault()
        swal.fire({
            title: 'Procesando ...',
            didOpen() {
                swal.showLoading()
            },
            didClose() {
                swal.hideLoading()
            },
            allowOutsideClick: false,
            allowEscapeKey: false,
            allowEnterKey: false
        })
        var merchantKey = credentials();
        const currency = localStorage.getItem('currency') ?? 'CLP';
        const kushki = new Kushki({
            merchantId: merchantKey,
            inTestEnvironment: true,
        });
        kushki.requestCashToken({
            name: $('#cash-name').val(),
            lastName: $('#cash-lastname').val(),
            identification: $('#cash-document').val(),
            documentType: documentType(),
            email: $('#cash-email').val(),
            totalAmount: totalG,
            currency: currency,
            description: `Compra por ${currency} ${formatNumber(totalG)} en Kushki Store`,
        }, (response) => {
            swal.close();
            if (response.token) {
                var jsonHtml = `

//Respuestas

Float SUBTOTALIVA = ${(totalG * 0.81).toFixed(2)}
Float SUBTOTALIVA0 = 0
Float IVA = ${(totalG * 0.19).toFixed(2)}
String CURRENCY = ${currency}
String TOKEN = ${response.token}

// CODIGO
const kushki = new Kushki({
    merchantId: '${merchantKey}', 
    inTestEnvironment: true,
});  
kushki.requestCashToken({
      name: '${$('#cash-name').val()}','
      lastName: '${$('#cash-lastname').val()},
      identification: '${$('#cash-document').val()}',
      documentType: '${documentType()}',
      email: '${$('#cash-email').val()}',
      totalAmount: ${totalG},
      currency: '${currency}',
      description: 'Compra por ${currency} ${formatNumber(totalG)} en Kushki Store',
    },
    }, (response) => {
    if(response.code){
        console.log(response);
        // Submit your code to your back-end
    } else {
        console.error('Error: ',response.error, 'Code: ', response.code, 'Message: ',response.message);
    }
});


`
                $('#toggle-modal').click()
                $('#jscode').html(jsonHtml)
                hljs.highlightAll();
                console.log(response);

                // Submit your code to your back-end
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Hubo un error',
                    text: response.message,
                    showConfirmButton: true
                })
                console.error('Error: ', response.error, 'Code: ', response.code, 'Message: ', response.message);
            }
        });

    }


    function transferPay(event) {
        event.preventDefault()
        swal.fire({
            title: 'Procesando ...',
            didOpen() {
                swal.showLoading()
            },
            didClose() {
                swal.hideLoading()
            },
            allowOutsideClick: false,
            allowEscapeKey: false,
            allowEnterKey: false
        })
        var merchantKey = credentials();
        const currency = localStorage.getItem('currency') ?? 'CLP';
        const kushki = new Kushki({
            merchantId: merchantKey,
            inTestEnvironment: true,
        });
        kushki.requestTransferToken({
            bankId: $('#transfer-bank').val(),
            callbackUrl: 'http://www.testcallbackurl.com/',
            userType: $('#transfer-userType').val(),
            documentType: documentType(),
            documentNumber: $('#transfer-document').val(),
            paymentDesc: `Compra por ${currency} ${formatNumber(totalG)} en Kushki Store`,
            email: $('#transfer-email').val(),
            currency: currency,
            amount: {
                subtotalIva: parseFloat((totalG * 0.81).toFixed(2)),
                subtotalIva0: 0,
                iva: parseFloat((totalG * 0.19).toFixed(2)),
            }
        }, (response) => {
            swal.close();
            if (response.token) {
                var jsonHtml = `

//Respuestas

Float SUBTOTALIVA = ${(totalG * 0.81).toFixed(2)}
Float SUBTOTALIVA0 = 0
Float IVA = ${(totalG * 0.19).toFixed(2)}
String CURRENCY = ${currency}
String TOKEN = ${response.token}

// CODIGO
const kushki = new Kushki({
    merchantId: '${merchantKey}', 
    inTestEnvironment: true,
});  

//Lista de bancos
var callback = function(response) {
  if(!response.code){
    console.log(response);
    });
  } else {
    console.error('Error: ',response.error, 'Code: ', response.code, 'Message: ',response.message);
  }
}

kushki.requestBankList(callback);

// Token
kushki.requestTransferToken({
    bankId: '${$('#transfer-bank').val()}',
    callbackUrl: 'http://www.testcallbackurl.com/', 
    userType: '${$('#transfer-userType').val()}',
    documentType: '${documentType()}',
    documentNumber: '${$('#transfer-document').val()}',
    paymentDesc: 'Compra por ${currency} ${formatNumber(totalG)} en Kushki Store',
    email: '${$('#transfer-email').val()}',
    currency: '${currency}',
    amount: {
      subtotalIva: ${(totalG * 0.81).toFixed(2)},
      subtotalIva0: 0,
      iva: ${(totalG * 0.19).toFixed(2)},
      },
    }, (response) => {
    if(response.code){
        console.log(response);
        // Submit your code to your back-end
    } else {
        console.error('Error: ',response.error, 'Code: ', response.code, 'Message: ',response.message);
    }
});


`
                $('#toggle-modal').click()
                $('#jscode').html(jsonHtml)
                hljs.highlightAll();
                console.log(response);

                // Submit your code to your back-end
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Hubo un error',
                    text: response.message,
                    showConfirmButton: true
                })
                console.error('Error: ', response.error, 'Code: ', response.code, 'Message: ', response.message);
            }
        });

    }

    function finish() {
        const min = 1000;
        const max = 999999;
        const rango = max - min + 1;
        var randomId = Math.floor(Math.random() * rango) + min;
        Swal.fire({
            icon: 'success',
            title: 'Tu compra ha finalizado con éxito',
            text: `Id de compra: ${randomId}`,
            showConfirmButton: true,
            allowOutsideClick: false,
            allowEscapeKey: false,
            allowEnterKey: false,
        }).then((result) => {
            localStorage.removeItem('cart')
            window.location.href = 'index.html'
        })
    }

</script>

</html>